{"ast":null,"code":"import _toConsumableArray from\"C:/Users/dibya/OneDrive/Desktop/VS code/Alien-Go-Home/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/dibya/OneDrive/Desktop/VS code/Alien-Go-Home/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{calculateAngle}from'../utils/formulas';import createFlyingObjects from'./createFlyingObjects';import moveBalls from'./moveCannonBalls';import checkCollisions from'./checkCollisions';function moveObjects(state,action){if(!state.gameState.started)return state;var cannonBalls=moveBalls(state.gameState.cannonBalls);var mousePosition=action.mousePosition||{x:0,y:0};var newState=createFlyingObjects(state);var now=new Date().getTime();var flyingObjects=newState.gameState.flyingObjects.filter(function(object){return now-object.createdAt<4000;});var lostLife=state.gameState.flyingObjects.length>flyingObjects.length;var lives=state.gameState.lives;if(lostLife){lives--;}var started=lives>0;if(!started){flyingObjects=[];cannonBalls=[];lives=3;}var x=mousePosition.x,y=mousePosition.y;var angle=calculateAngle(0,0,x,y);var objectsDestroyed=checkCollisions(cannonBalls,flyingObjects);var cannonBallsDestroyed=objectsDestroyed.map(function(object){return object.cannonBallId;});var flyingDiscsDestroyed=objectsDestroyed.map(function(object){return object.flyingDiscId;});cannonBalls=cannonBalls.filter(function(cannonBall){return cannonBallsDestroyed.indexOf(cannonBall.id);});flyingObjects=flyingObjects.filter(function(flyingDisc){return flyingDiscsDestroyed.indexOf(flyingDisc.id);});var kills=state.gameState.kills+flyingDiscsDestroyed.length;return _objectSpread(_objectSpread({},newState),{},{gameState:_objectSpread(_objectSpread({},newState.gameState),{},{flyingObjects:flyingObjects,cannonBalls:_toConsumableArray(cannonBalls),lives:lives,started:started,kills:kills}),angle:angle});}export default moveObjects;","map":{"version":3,"names":["calculateAngle","createFlyingObjects","moveBalls","checkCollisions","moveObjects","state","action","gameState","started","cannonBalls","mousePosition","x","y","newState","now","Date","getTime","flyingObjects","filter","object","createdAt","lostLife","length","lives","angle","objectsDestroyed","cannonBallsDestroyed","map","cannonBallId","flyingDiscsDestroyed","flyingDiscId","cannonBall","indexOf","id","flyingDisc","kills","_objectSpread","_toConsumableArray"],"sources":["C:/Users/dibya/OneDrive/Desktop/VS code/Alien-Go-Home/src/reducers/moveObjects.js"],"sourcesContent":["import { calculateAngle } from '../utils/formulas';\r\nimport createFlyingObjects from './createFlyingObjects';\r\nimport moveBalls from './moveCannonBalls';\r\nimport checkCollisions from './checkCollisions';\r\n\r\nfunction moveObjects(state, action) {\r\n  if (!state.gameState.started) return state;\r\n\r\n  let cannonBalls = moveBalls(state.gameState.cannonBalls);\r\n\r\n  const mousePosition = action.mousePosition || {\r\n    x: 0,\r\n    y: 0,\r\n  };\r\n\r\n  const newState = createFlyingObjects(state);\r\n\r\n  const now = (new Date()).getTime();\r\n  let flyingObjects = newState.gameState.flyingObjects.filter(object => (\r\n    (now - object.createdAt) < 4000\r\n  ));\r\n\r\n  const lostLife = state.gameState.flyingObjects.length > flyingObjects.length;\r\n  let lives = state.gameState.lives;\r\n  if (lostLife) {\r\n    lives--;\r\n  }\r\n\r\n  const started = lives > 0;\r\n  if (!started) {\r\n    flyingObjects = [];\r\n    cannonBalls = [];\r\n    lives = 3;\r\n  }\r\n\r\n  const { x, y } = mousePosition;\r\n  const angle = calculateAngle(0, 0, x, y);\r\n\r\n  const objectsDestroyed = checkCollisions(cannonBalls, flyingObjects);\r\n  const cannonBallsDestroyed = objectsDestroyed.map(object => (object.cannonBallId));\r\n  const flyingDiscsDestroyed = objectsDestroyed.map(object => (object.flyingDiscId));\r\n\r\n  cannonBalls = cannonBalls.filter(cannonBall => (cannonBallsDestroyed.indexOf(cannonBall.id)));\r\n  flyingObjects = flyingObjects.filter(flyingDisc => (flyingDiscsDestroyed.indexOf(flyingDisc.id)));\r\n\r\n  const kills = state.gameState.kills + flyingDiscsDestroyed.length;\r\n\r\n  return {\r\n    ...newState,\r\n    gameState: {\r\n      ...newState.gameState,\r\n      flyingObjects,\r\n      cannonBalls: [...cannonBalls],\r\n      lives,\r\n      started,\r\n      kills,\r\n    },\r\n    angle,\r\n  };\r\n}\r\n\r\nexport default moveObjects;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}